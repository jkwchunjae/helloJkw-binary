@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>

<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/xhtml">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>WorkManager</title>
	@*<link rel="stylesheet" type="text/css" href="/Static/js/webix/webix.css" />*@
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/semantic.css" />

	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/accordion.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/ad.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/breadcrumb.css" />*@
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/button.css" />
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/card.css" />
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/checkbox.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/comment.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/container.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/dimmer.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/divider.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/dropdown.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/embed.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/feed.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/flag.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/form.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/grid.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/header.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/icon.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/image.css" />*@
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/input.css" />
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/item.css" />
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/label.css" />
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/list.css" />
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/loader.css" />*@
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/menu.css" />
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/message.css" />
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/modal.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/nag.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/popup.css" />*@
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/progress.css" />
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/rail.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/rating.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/reset.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/reveal.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/search.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/segment.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/shape.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/sidebar.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/site.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/statistic.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/step.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/sticky.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/tab.css" />*@
	<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/table.css" />
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/transition.css" />*@
	@*<link rel="stylesheet" type="text/css" href="/Static/js/semantic-ui/components/video.css" />*@

	<script src="/Static/js/angular.min.js"></script>
	@*<script src="/Static/js/webix/webix.js"></script>*@
</head>
<body style="padding: 20px;" ng-app="app-work" ng-controller="work-controller">
	<h1>@Model.ProjectName</h1>
	<div class="ui two cards stackable" ng-if="work.HasSubWorks">
		<div class="card" ng-repeat="subWork in work.SubWorks">
			<div>
				<span ng-if="subWork.HasChild==true"><a href="/workmanager/project/@Model.ProjectName/?subworkpath={{subWork.Name}}">{{subWork.Name}}</a></span>
				<span ng-if="subWork.HasChild==false">{{subWork.Name}}</span>
				<div style="display: inline;">
					<i class="icon edit"></i>
				</div>
			</div>
			<div>
				<span>{{subWork.Weight}}</span>
				<div style="display: inline;">
					<i class="icon edit"></i>
				</div>
			</div>
			<div>
				<span>{{subWork.Time}}</span>
				<div ng-if="subWork.HasChild==false" style="display: inline;">
					<i class="icon plus"></i><i class="icon minus"></i>
				</div>
			</div>
			<div>
				<span ng-if="subWork.HasChild==false">{{subWork.ProgressValue}} / {{subWork.ProgressMax}} ( {{subWork.Progress * 100}} % )</span>
				<span ng-if="subWork.HasChild==true">{{subWork.Progress * 100 | number:1}} %</span>
				<div ng-if="subWork.HasChild==false" style="display: inline;">
					<i class="icon plus"></i><i class="icon minus"></i>
				</div>
			</div>
			<div>
				<button class="button">작업 삭제</button>
				<button ng-if="subWork.HasChild==false" class="button">하위 작업추가</button>
				<button ng-if="subWork.HasChild==false" class="button">하위 테이블추가</button>
				<button ng-if="subWork.HasSubWorks==true" class="button">하위 작업 삭제</button>
				<button ng-if="subWork.HasTable==true" class="button">하위 테이블 삭제</button>
			</div>
		</div>
	</div>

	<table class="ui table celled" ng-if="work.HasTable">
		<thead>
			<tr>
				<th>이름</th>
				<th ng-repeat="column in work.Table.Column">{{column.Name}}</th>
			</tr>
		</thead>
		<tr ng-repeat="row in work.Table.Row">
			<td>{{row.Name}} ({{row.SubWorks.length}})</td>
			<td ng-repeat="subWork in row.SubWorks">
				<div class="card">
					{{subWork.Name}}
				</div>
			</td>
		</tr>
	</table>

	<textarea id="console" style="width: 700px; height: 500px;"></textarea>
	<script src="/Static/js/jquery-2.1.3.min.js"></script>
	<script src="/Static/js/semantic-ui/semantic.js"></script>

	<script type="text/javascript">
		$('#progress-1')
		.progress({
			percent: 33
		})

		$(function () {
		})

		var app = angular.module('app-work', []);
		var getScope = function () {
			return angular.element(document.querySelector('[ng-controller="work-controller"]')).scope();
		};

		app.controller('work-controller', function ($scope) {
			$scope.work = {}

			$.post('/workmanager/project', {
				projectName: '@Model.ProjectName',
				subWorkPath: '@Model.SubWorkPath'
			}, function (data) {
				$('#console').val(data)
				var work = JSON.parse(data)
				$scope.work = work
				$scope.$apply();
				$('.progress').each(function(){
					$(this).progress({
						total: $(this).attr('data-total'),
						value: $(this).attr('data-value')
					})
				})
			})
		});

	</script>
</body>
</html>